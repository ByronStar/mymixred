<!DOCTYPE html>
<html>

<head>
    <title>NodeJS MultiUser Application</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="author" content="ByronStar">

    <!-- Styles -->
    <link rel="stylesheet" href="stylesheets/style.css">

    <style>
        img {
            object-fit: none;
            margin: 5px;
            width: 165px;
            height: 300px;
        }
    </style>

    <script>
      let sym = [
        [0, 1, 2, 3, 4, 5, 6, 7, 8],
        [0, 2, 4, 6, 8, 1, 3, 5, 7],
        [0, 3, 6, 1, 4, 7, 2, 5, 8]
      ]

      let reel0
      let off = 1800
      let step = 40
      let intId
      let reel = []
      let steps = [Math.floor(Math.random() * 9), Math.floor(Math.random() * 9), Math.floor(Math.random() * 9)]
//      let steps = [sym[0].indexOf(1), sym[1].indexOf(2), sym[2].indexOf(3)]
      console.log(steps)
      steps = steps.map((r, i) => 200 / step * (9 - sym[i].indexOf(r)) + i * 1800/step + 2)

      function init() {
        reel.push(document.getElementById('reel0'))
        reel.push(document.getElementById('reel1'))
        reel.push(document.getElementById('reel2'))
        intId = setInterval(roll, 20)
      }

      function roll() {
        if (off < step) {
          off = 1800
        }
        let finish = true
        steps.forEach((r, i) => {
          if (r > 0) {
            finish = false
            reel[i].setAttribute('style', "object-position: 0 -" + off + "px;")
            steps[i]--
          }
        })
        if (finish) {
          clearInterval(intId)
        } else {
          off -= step
        }
      }
    </script>

</head>

<body onload="init()">
<div style="margin: 200px 0 0 200px">
    <img id="reel0" style="object-position: 0 -0px;" src="images/reel0.png">
    <img id="reel1" style="object-position: 0 -0px;" src="images/reel1.png">
    <img id="reel2" style="object-position: 0 -0px;" src="images/reel2.png">
</div>
</body>
</html>
